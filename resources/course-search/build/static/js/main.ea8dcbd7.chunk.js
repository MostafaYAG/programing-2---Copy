(this["webpackJsonpcourse-search"]=this["webpackJsonpcourse-search"]||[]).push([[0],{105:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var c={QUAL_GROUP:"QUAL_GROUP",PG_ATTENDANCE:"PG_ATTENDANCE"},r={QUALIFICATION:"Qualification",ATTENDANCE:"Attendance",SUBJECTS:"Subjects"},a="No courses found"},133:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var c=n(1),r=function(e){var t=Object(c.useRef)();return Object(c.useEffect)((function(){t.current=e})),t.current}},188:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var c=20},227:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var c=function(e){return e?JSON.parse('{"'+e.replace(/&/g,'","').replace(/=/g,'":"')+'"}',(function(e,t){return""===e?t:decodeURIComponent(t)})):{}}},229:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var c=n(81),r=Object(c.b)({key:"searchResultState",default:{totalNumberOfResults:null}})},240:function(e,t,n){"use strict";n.d(t,"a",(function(){return te})),n.d(t,"e",(function(){return ae})),n.d(t,"d",(function(){return oe})),n.d(t,"b",(function(){return K}));var c=n(21),r=n(10),a=n(28),u=n.n(a),o=n(87),i=n(175),s=n(13),l=n(1),d=n(30),b=n(81),f=n(127),j=n(225),h=n(6),O=n(116),g=n.n(O),p=n(174),v=n.n(p),x=n(173),S=n(567),m=n(560),y=n(561),C=n(568),E=n(562),w=n(239),k=n(564),A=n(154),T=n(105),R=n(187),I=n(20);function U(){var e=Object(R.a)(["\n            ","\n            html,\n            body,\n            p,\n            ol,\n            ul,\n            li,\n            dl,\n            dt,\n            dd,\n            blockquote,\n            figure,\n            fieldset,\n            legend,\n            textarea,\n            pre,\n            iframe,\n            hr,\n            h1,\n            h2,\n            h3,\n            h4,\n            h5,\n            h6 {\n                margin: 0;\n                padding: 0;\n            }\n\n            h1,\n            h2,\n            h3,\n            h4,\n            h5,\n            h6 {\n                font-size: 100%;\n                font-weight: normal;\n            }\n\n            ul {\n                list-style: none;\n            }\n\n            button,\n            input,\n            select,\n            textarea {\n                margin: 0;\n            }\n\n            html {\n                box-sizing: border-box;\n                /* font-family: 'Ne10-simplified', Helvetica, Arial, sans-serif; */\n            }\n\n            *,\n            *::before,\n            *::after {\n                box-sizing: inherit;\n            }\n\n            img,\n            video {\n                height: auto;\n                max-width: 100%;\n            }\n\n            iframe {\n                border: 0;\n            }\n\n            table {\n                border-collapse: collapse;\n                border-spacing: 0;\n            }\n\n            td,\n            th {\n                padding: 0;\n            }\n\n            td:not([align]),\n            th:not([align]) {\n                text-align: left;\n            }\n        "]);return U=function(){return e},e}var N=function(e){var t=e.styles;return Object(s.jsx)(I.a,{styles:Object(I.c)(U(),t)})},D=n(133),L=n(227),P=n(316),_="advert-course-search",q=function(e,t){Object(l.useLayoutEffect)((function(){var n=window.googletag||{cmd:[]},c=[];n.cmd.push((function(){n.pubads().getTargeting("Keyword").length&&n.pubads().clearTargeting("Keyword"),n.pubads().getTargeting("KeyValues").length&&n.pubads().clearTargeting("KeyValues"),n.pubads().collapseEmptyDivs();for(var r=1;r<=2;r++){var a=n.defineSlot("/141389100/MPUContent",[300,250],"".concat(_,"-")+r);a&&(a.setCollapseEmptyDiv(!0),c.push(a),e&&a.setTargeting("Keyword",e),t.length&&a.setTargeting("KeyValues",t),a.addService(n.pubads()))}n.pubads().enableSingleRequest(),n.enableServices();for(var u=1;u<=2;u++)n.display("".concat(_,"-")+u)}))}),[e,t])},z=n(325),F=n(234),G=n(326);function B(){var e=Object(R.a)(["\n    padding-top: 36px;\n"]);return B=function(){return e},e}var Q,K,H=Object(G.a)(h.j)(B()),J=n(188),M=n(228),V=n(565),W=n(556),X=n(329),Y=n(229),Z=Object(l.lazy)((function(){return Promise.all([n.e(4),n.e(5)]).then(n.bind(null,575))})),$=Object(l.lazy)((function(){return Promise.all([n.e(3),n.e(6)]).then(n.bind(null,576))})),ee=new V.a,te="",ne="".concat(te,"/api/taxonomy/categories?subject_categories=").concat(T.c.QUAL_GROUP,"&subject_categories_groups="),ce="".concat(te,"/api/taxonomy/categories?subject_categories=").concat(T.c.PG_ATTENDANCE,"&subject_categories_groups="),re="".concat(te,"/api/selected-filters"),ae="".concat(te,"/api/toggleSaved/course?itemId="),ue="".concat(te,"/api/profile"),oe="selectedCourse",ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 0===e?J.a:e*J.a},se=function(e){return S.a(m.a((function(e,t){return[{value:"all",checked:!0,name:"".concat(v()(t),"[]"),id:"".concat(v()(t),"All"),label:"All"}].concat(Object(i.a)(e.map((function(e){var n=e.text,c=e.tnr;return{value:n?Object(x.a)(n.toLowerCase()):"",checked:!1,name:"".concat(v()(t),"[]"),id:"".concat(c),label:n[0].toUpperCase()+n.slice(1)}}))))})),Object(k.a)((function(e){return function(e){return e==="".concat(T.c.PG_ATTENDANCE)?T.a.ATTENDANCE:e==="".concat(T.c.QUAL_GROUP)?T.a.QUALIFICATION:T.a.SUBJECTS}(e)})))(e)},le=function(){var e=Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ce);case 2:return e.next=4,e.sent.json();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ne);case 2:return e.next=4,e.sent.json();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=Object(o.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([de(),le()]);case 2:return t=e.sent,n={},t.forEach((function(e){return n["".concat(Object.keys(e)[0])]=Object.values(e)[0]})),e.abrupt("return",se(n));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=Object(o.a)(u.a.mark((function e(t,n){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(te,"/api/relatedItems?relatedItemTypes=COURSE&tnrs=").concat(t,"&maxItems=4")).then((function(e){return e.json()}));case 2:c=e.sent,n(c);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();!function(e){e.IDLE="IDLE",e.LOADING="LOADING",e.SUCCESS="SUCCESS",e.ERROR="ERROR"}(Q||(Q={})),function(e){e.SEARCH_CLEARED="search:cleared",e.SEARCH_SUBMITTED="search:submitted"}(K||(K={}));var je=function(){var e=Object(W.b)(),t=Object(f.b)(),n=Object(d.f)().search,a=Object(d.g)(),i=Object(z.useAsyncResource)(be,[]),h=Object(r.a)(i,1)[0],O=Object(l.useState)([]),p=Object(r.a)(O,2),v=p[0],x=p[1],S=Object(l.useState)({attendance:[],qualification:[],location:[],institution:[],subject:[],keyword:"",featuredCourses:"",size:"20",all:null}),m=Object(r.a)(S,2),k=m[0],T=m[1],R=Object(l.useState)(Q.IDLE),I=Object(r.a)(R,2),U=I[0],N=I[1],_=Object(l.useState)(""),G=Object(r.a)(_,2),B=G[0],V=G[1],ee=Object(l.useRef)(!1),te=Object(l.useCallback)((function(e){return ee.current=e}),[]),ne=Object(l.useRef)(!1),ce=Object(l.useState)(""),ae=Object(r.a)(ce,2),se=ae[0],le=ae[1],de=Object(b.e)(P.a),je=Object(l.useState)(""),he=Object(r.a)(je,2),Oe=he[0],ge=he[1],pe=Object(l.useState)([]),ve=Object(r.a)(pe,2),xe=ve[0],Se=ve[1],me=Object(l.useState)(!1),ye=Object(r.a)(me,2),Ce=ye[0],Ee=ye[1],we=Object(l.useState)({page:0,size:20,searchParams:null,featuredCourses:null,selectedSubjectText:"",subjectParam:""}),ke=Object(r.a)(we,2),Ae=ke[0],Te=ke[1],Re=Object(b.c)(Y.a).totalNumberOfResults,Ie=Object(b.d)(Y.a),Ue=Object(l.useRef)(!0),Ne=Object(l.useRef)(!1),De=Object(D.a)(v),Le=Object(D.a)(B),Pe=Object(D.a)(k),_e=Object(D.a)(ee),qe=Object(D.a)(se),ze=k.featuredCourses?k.featuredCourses.split(",").map((function(e){return parseInt(e,10)})):null,Fe=Object(l.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:J.a;fe(v,Se),Ee(!0),Te({page:t,size:n,searchParams:e,featuredCourses:ze,selectedSubjectText:B,subjectParam:se||""})}),[B,se,ze,v]);return Object(f.c)(K.SEARCH_SUBMITTED,(function(){})),Object(l.useEffect)((function(){sessionStorage.getItem(oe)&&window.scrollTo(0,0);var e=function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get(ue,{withCredentials:!0});case 2:200===(t=e.sent).status&&t.data&&de(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();try{e()}catch(t){throw new Error(t)}}),[de]),Object(A.a)((function(){var r=Object(L.a)(n.substring(1)),i=r["extra-criteria"],s=i?"?extra-criteria=".concat(i):"",l=Object(L.a)(n.substring(1)).keyword,d=y.a(a),b=function(){var e=Object(o.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(Q.LOADING),e.next=4,g.a.get("".concat(re).concat(d.includes("all")?"":"/"+d.join("/")).concat(s?l?"?keyword=".concat(l,"&extra-criteria=").concat(i):s:l?"?keyword=".concat(l):""));case 4:t=e.sent,n=t.data,N(Q.SUCCESS),a=r.page||"0",T(Object(c.a)(Object(c.a)({},n.selectedFilters),{},{keyword:n.selectedFilters.keyword[0]||"",featuredCourses:r.featuredCourses||"",size:ie(parseInt(a)+1).toString(),all:d.includes("all")||null})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),N(Q.ERROR),console.error("fetching selected filters: ".concat(e.t0));case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();if(C.a(a)&&!n&&Ce)return e.clear(),t.emit(K.SEARCH_CLEARED),Ie(),T({attendance:[],qualification:[],location:[],institution:[],subject:[],keyword:"",featuredCourses:"",size:"20",all:null}),void Ee(!1);b()}),[a,n]),Object(A.a)((function(){var e,t,n,c,r;if(U===Q.SUCCESS){var a=E.a("tnr"),u=null===(e=k.qualification)||void 0===e?void 0:e.map(a),o=null===(t=k.attendance)||void 0===t?void 0:t.map(a),i=null===(n=k.location)||void 0===n?void 0:n.map(a),s=null===(c=k.institution)||void 0===c?void 0:c.map(a),l=k.keyword||(null===(r=k.subject[0])||void 0===r?void 0:r.text)||"";x(u.concat(o,i,s).filter(Boolean)),V(l)}}),[k,U]),Object(l.useEffect)((function(){var e=y.a(a);e.length||e.includes("all")||n||!Ue.current||(Ue.current=!1,fe(v,Se))}),[a,v,n]),Object(A.a)((function(){var e=w.a(De,v),t=w.a(k,Pe),n=parseInt(k.size,10);if(U===Q.SUCCESS){if(!ee.current&&v.length&&(ne.current=!0),ee.current||v.length||(ne.current=!1),ee.current&&!ne.current&&!v.length&&!B&&!se&&(!e||Le!==B)&&k.all)return Ne.current=!0,Fe([],void 0,void 0,!1);if(ee.current&&!ne.current&&!v.length&&!B&&e&&t&&Le===B&&!se&&!Re&&!k.all)return Ne.current=!0,Fe([],void 0,void 0,!1);if(ee.current&&ne.current&&(v.length||B)&&(!e||Le!==B)&&!k.all)return Ne.current=!1,Fe(v,void 0,void 0,!1);if(!e||!t||ee.current!==(null===_e||void 0===_e?void 0:_e.current)||Le!==B||qe!==se){if(!ee.current&&(v.length||B)&&(!e||Le!==B))return Ne.current=!1,Fe(v,void 0,void 0,void 0,n);if(!ee.current&&!ne.current&&!v.length&&!B&&k.all){if(Ne.current)return;return Ne.current=!0,Fe([],void 0,void 0,void 0,n)}}}}),[k,Pe,_e,v,De,Fe,Le,B,se,qe,Re,U]),Object(A.a)((function(){U===Q.SUCCESS&&ge(function(){var e=!k.attendance.length&&!k.institution.length&&!k.location.length&&!k.qualification.length&&!k.subject.length,t="",n=!1;return 1===k.attendance.length&&(0===k.qualification.length?(t="".concat(k.attendance[0].text," courses"),1===k.subject.length&&(n=!0,t="".concat(k.attendance[0].text," ").concat(k.subject[0].text," courses"))):t=1===k.qualification.length?t.concat("".concat(k.attendance[0].text,",")):""),1===k.qualification.length&&(t=1===k.attendance.length||0===k.attendance.length?t.concat(" ".concat(k.qualification[0].text)):""),(k.qualification.length>1||k.attendance.length>1)&&(t=""),0===k.qualification.length&&0===k.attendance.length&&(t="postgraduate courses"),0===k.subject.length||""===t||n||(t=t.concat(" in ".concat(k.subject[0].text))),0!==k.subject.length&&""!==k.keyword&&k.keyword!==k.subject[0].text&&(t=""),k.keyword&&0===k.subject.length&&(t=""),0!==k.location.length&&""!==t&&(t=t.concat(" in ".concat(k.location[0].text))),0!==k.institution.length&&""!==t&&(t=t.concat(" at ".concat(k.institution[0].text))),e&&""===k.keyword&&(t=""),""!==t&&(t=t[0].toUpperCase().concat(t.slice(1))),t}())}),[k.attendance,k.institution,k.keyword,k.location,k.qualification,k.subject,U]),q(k.keyword,v),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(M.a,{children:Object(s.jsx)("meta",{name:"gp-key-values",content:v.toString()})}),Object(s.jsx)(j.d,{title:"Search postgraduate courses",children:Object(s.jsx)(F.ErrorBoundary,{fallback:Object(s.jsx)("div",{children:"There has been an error"}),children:Object(s.jsx)(l.Suspense,{fallback:Object(s.jsx)(H,{loading:!0}),children:Object(s.jsx)(Z,{isSearch:function(e){te(e)},hasFilters:function(e){return ne.current=e},selectedFilters:k,subjectParam:function(e){le(e)},filtersReader:h})})})}),Ce&&Object(s.jsx)(F.ErrorBoundary,{fallback:Object(s.jsx)("div",{children:"There has been an error"}),children:Object(s.jsx)(l.Suspense,{fallback:Object(s.jsx)(H,{loading:!0}),children:Object(s.jsx)($,{title:Oe,searchData:Ae,setSearch:te})})}),Object(s.jsx)(j.c,{relatedItems:xe}),Object(s.jsx)(X.ReactQueryDevtools,{initialIsOpen:!0})]})};t.c=function(){return Object(s.jsxs)(h.o,{theme:h.t,children:[Object(s.jsx)(N,{}),Object(s.jsx)(M.b,{children:Object(s.jsx)(b.a,{children:Object(s.jsx)(W.a,{client:ee,children:Object(s.jsx)(f.a,{children:Object(s.jsx)(d.a,{path:["/postgraduate-courses","/postgraduate-courses/:one","/postgraduate-courses/:one/:two","/postgraduate-courses/:one/:two/:three","/postgraduate-courses/:one/:two/:three/:four"],exact:!0,children:Object(s.jsx)(je,{})})})})})})]})}},316:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var c=n(81),r=Object(c.b)({key:"userLoggedInState",default:!1})},555:function(e,t,n){"use strict";n.r(t);var c=n(13),r=(n(339),n(349),n(1)),a=n.n(r),u=n(177),o=n.n(u),i=n(230),s=n(240),l=function(e){e&&e instanceof Function&&n.e(7).then(n.bind(null,578)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,u=t.getTTFB;n(e),c(e),r(e),a(e),u(e)}))};o.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(i.a,{children:Object(c.jsx)(s.c,{})})}),document.getElementById("courseSearch")),l()}},[[555,1,2]]]);
//# sourceMappingURL=main.ea8dcbd7.chunk.js.map